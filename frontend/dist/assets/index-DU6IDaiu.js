import{_ as $,u as j,r,y as H,Q as q,c as p,o as i,f as l,k as a,av as F,h as d,m as o,A as c,aw as V,n as g,ax as B,ay as y,az as I,aA as Q,aB as G,j as z,i as J,aC as K,L as O,am as W,aD as X,aE as A,t as Y,v as Z}from"./index-BehJRYYk.js";import{b as ee,c as ae,d as te}from"./guide-DwdM5SCn.js";const u=m=>(Y("data-v-341d42a5"),m=m(),Z(),m),le={class:"department-detail"},oe={key:0,class:"loading-spinner"},se={key:1,class:"content"},ne={class:"department-name"},re=u(()=>o("strong",null,"分类: ",-1)),ie=u(()=>o("p",null,[o("strong",null,"描述: ")],-1)),de=["innerHTML"],ce=u(()=>o("h3",{class:"doctor-title"},"医生列表",-1)),ue={key:0},pe=u(()=>o("strong",null,"姓名: ",-1)),ve=u(()=>o("strong",null,"头衔: ",-1)),ge=u(()=>o("strong",null,"信息: ",-1)),me=u(()=>o("strong",null,"出诊时间",-1)),_e={__name:"index",setup(m){const M=j(),_=r(null),f=r([]),k=r(!0),n=r(null),h=r(!1),v=r([]),b=r(!1),w=r(1),x=r(5),D=M.query.departmentId,S=async()=>{try{const e=await ee(D);console.log(e),_.value=e.data;const t=await ae(D);f.value=t.data}catch(e){console.error("Error fetching department details or doctors:",e),A.error("加载科室或医生信息失败，请稍后再试")}finally{k.value=!1}},R=e=>e?e.split(`
`).map(t=>`<p style="text-indent: 2em; margin-bottom: 10px;">${t}</p>`).join(""):"",T=e=>{n.value=e,h.value=!0,v.value=[]},L=async e=>{b.value=!0;try{const t=await te(e);v.value=t.data}catch(t){console.error("Error fetching availability:",t),A.error("加载出诊时间失败，请稍后再试")}finally{b.value=!1}},N=()=>{h.value=!1,n.value=null,v.value=[]},U=H(()=>{const e=(w.value-1)*x.value,t=e+x.value;return f.value.slice(e,t)}),P=e=>{w.value=e};return q(()=>{S()}),(e,t)=>(i(),p("div",le,[k.value?(i(),p("div",oe,[l(a(F),{rows:5,animated:""})])):(i(),p("div",se,[l(a(B),{class:"department-info",shadow:"hover"},{default:d(()=>{var s,E,C;return[o("h2",ne,c((s=_.value)==null?void 0:s.name),1),l(a(V)),o("p",null,[re,g(c((E=_.value)==null?void 0:E.category),1)]),ie,o("div",{class:"department-description",innerHTML:R((C=_.value)==null?void 0:C.info)},null,8,de),l(a(V))]}),_:1}),ce,l(a(Q),{data:U.value,style:{width:"100%"},onRowClick:T,stripe:"","highlight-current-row":""},{default:d(()=>[l(a(y),{prop:"imageUrl",label:"医生头像",width:"120"},{default:d(({row:s})=>[l(a(I),{src:s.imageUrl,size:80},null,8,["src"])]),_:1}),l(a(y),{prop:"name",label:"姓名",width:"150"}),l(a(y),{prop:"title",label:"头衔",width:"150"}),l(a(y),{prop:"info",label:"信息"})]),_:1},8,["data"]),l(a(G),{class:"pagination",background:"",layout:"prev, pager, next",total:f.value.length,"page-size":x.value,"current-page":w.value,onCurrentChange:P},null,8,["total","page-size","current-page"]),l(a(X),{modelValue:h.value,"onUpdate:modelValue":t[1]||(t[1]=s=>h.value=s),title:n.value?`${n.value.name} 的详细信息`:"",onClose:N,width:"600px"},{default:d(()=>[n.value?(i(),p("div",ue,[l(a(I),{src:n.value.imageUrl,size:100,style:{"margin-bottom":"16px"}},null,8,["src"]),o("p",null,[pe,g(c(n.value.name),1)]),o("p",null,[ve,g(c(n.value.title),1)]),o("p",null,[ge,g(c(n.value.info),1)]),l(a(K),{type:"primary",onClick:t[0]||(t[0]=s=>L(n.value.id)),loading:b.value,style:{"margin-top":"16px"}},{default:d(()=>[g(" 加载出诊时间 ")]),_:1},8,["loading"]),v.value.length>0?(i(),J(a(B),{key:0,style:{"margin-top":"16px"}},{header:d(()=>[me]),default:d(()=>[(i(!0),p(O,null,W(v.value,s=>(i(),p("div",{key:s.id,style:{"margin-bottom":"8px"}},c(s.day)+" - "+c(s.time),1))),128))]),_:1})):z("",!0)])):z("",!0)]),_:1},8,["modelValue","title"])]))]))}},fe=$(_e,[["__scopeId","data-v-341d42a5"]]);export{fe as default};

import{_ as y,c as l,o as d,m as t,A as u,L as p,am as _,j as S,f as x,h as g,a5 as r,aF as C,ac as b,a4 as f,aG as v,l as k,t as w,v as T}from"./index-BehJRYYk.js";const O={name:"DiseaseSymptomSelector",props:{diseasePart:String,availableOptions:Object,loading:Boolean},data(){return{inputText:localStorage.getItem("savedSymptoms")||"",selected:{},customSymptom:"",expandedParts:new Set}},watch:{availableOptions:{immediate:!0,handler(s){this.initSelectedState(s)}}},methods:{initSelectedState(s){this.selected=Object.keys(s).reduce((e,a)=>(e[a]=[],e),{})},toggleExpand(s){this.expandedParts.has(s)?this.expandedParts.delete(s):this.expandedParts.add(s)},onSelectChange(s){(this.selected[s]||[]).forEach(a=>{this.inputText.includes(a)||(this.inputText+=a+" ")})},addCustomSymptom(){this.customSymptom.trim()&&(this.inputText+=this.customSymptom+" ",this.customSymptom="")},onSave(){if(!this.inputText||this.inputText.trim()===""){alert("症状描述不能为空");return}const s=this.inputText.trim();localStorage.setItem("savedSymptoms",s),alert("症状已保存")},onJump(){if(!this.inputText||this.inputText.trim()===""){alert("请先输入症状描述");return}window.location.href="http://localhost/guide/symptoms-confirm"},onCancel(){this.$emit("hide")}}},h=s=>(w("data-v-3482b957"),s=s(),T(),s),P={class:"disease-selector"},V={class:"header"},I={key:0,class:"loading-state"},j=h(()=>t("div",{class:"loader-small"},null,-1)),B=h(()=>t("p",null,"正在加载症状数据...",-1)),D=[j,B],E={key:1,class:"content"},U={class:"options-section"},J={key:0,class:"option-group"},N=["onClick"],F={class:"expand-icon"},K={class:"option-content"},L=["onUpdate:modelValue","onChange"],M=["value"],A={class:"input-section"},G={key:0,class:"custom-input-group"},q=h(()=>t("h3",null,"其他症状",-1)),z={class:"input-wrapper"},H={class:"button-group"};function Q(s,e,a,R,c,n){return d(),l("div",P,[t("div",V,[t("h2",null,u(a.diseasePart)+" 疾病症状",1),t("button",{class:"close-btn",onClick:e[0]||(e[0]=(...o)=>n.onCancel&&n.onCancel(...o))}," × ")]),a.loading?(d(),l("div",I,D)):(d(),l("div",E,[t("div",U,[(d(!0),l(p,null,_(a.availableOptions,(o,i)=>(d(),l(p,{key:i},[i!=="其他"?(d(),l("div",J,[t("div",{class:"option-header",onClick:m=>n.toggleExpand(i)},[t("h3",null,u(i),1),t("span",F,u(c.expandedParts.has(i)?"−":"+"),1)],8,N),x(f,{name:"slide"},{default:g(()=>[r(t("div",K,[r(t("select",{multiple:"","onUpdate:modelValue":m=>c.selected[i]=m,onChange:m=>n.onSelectChange(i),class:"symptom-select"},[(d(!0),l(p,null,_(o,m=>(d(),l("option",{key:m,value:m},u(m),9,M))),128))],40,L),[[C,c.selected[i]]])],512),[[b,c.expandedParts.has(i)]])]),_:2},1024)])):S("",!0)],64))),128))]),t("div",A,[r(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=o=>c.inputText=o),rows:"8",class:"symptom-textarea",placeholder:"请输入症状描述..."},null,512),[[v,c.inputText]]),a.availableOptions.其他?(d(),l("div",G,[q,t("div",z,[r(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=o=>c.customSymptom=o),placeholder:"请输入其他症状...",class:"custom-input",onKeyup:e[3]||(e[3]=k((...o)=>n.addCustomSymptom&&n.addCustomSymptom(...o),["enter"]))},null,544),[[v,c.customSymptom]]),t("button",{onClick:e[4]||(e[4]=(...o)=>n.addCustomSymptom&&n.addCustomSymptom(...o)),class:"add-btn"},"+ 添加")])])):S("",!0),t("div",H,[t("button",{class:"btn save-btn",onClick:e[5]||(e[5]=(...o)=>n.onSave&&n.onSave(...o))}," 保存症状 "),t("button",{class:"btn jump-btn",onClick:e[6]||(e[6]=(...o)=>n.onJump&&n.onJump(...o))}," 跳转到诊断 ")])])]))])}const X=y(O,[["render",Q],["__scopeId","data-v-3482b957"]]);export{X as default};

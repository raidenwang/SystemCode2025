import{_ as M,a as w,r as _,y as I,Q as S,e as B,c as b,o as h,m as e,i as V,h as n,f as s,k as o,aw as N,aK as W,n as u,A as i,aL as z,aM as m,ax as T,aC as f,aN as A,t as D,v as $}from"./index-BehJRYYk.js";const v=d=>(D("data-v-f955d39c"),d=d(),$(),d),j={class:"result-page"},H={class:"container"},K=v(()=>e("div",{class:"header"},[e("h2",null,"诊断结果与建议"),e("p",{class:"subtitle"},"基于您的症状分析得出的专业建议")],-1)),L={class:"result-content"},Q={class:"section department-section"},R={class:"section-header"},U=v(()=>e("h3",null,"建议就诊科室",-1)),q={class:"department-content"},F=v(()=>e("p",{class:"department-tip"},"请尽快前往上述科室就诊",-1)),G={class:"content-box"},J={class:"content-box"},O={class:"content-box"},P={class:"content-box"},X={key:1,class:"no-result"},Y={class:"button-group"},Z={__name:"index",setup(d){const k=w(),l=_(""),g=_([]),y=_(""),r=I(()=>{var t,c,p;if(!l.value)return{patientInfo:"",symptoms:"",diagnosis:"",treatment:""};const a=C.value;return{patientInfo:((t=a.split("#### 患者基本信息：")[1])==null?void 0:t.split("#### 主诉症状：")[0])||"",symptoms:((c=a.split("#### 主诉症状：")[1])==null?void 0:c.split("#### 初步诊断：")[0])||"",diagnosis:((p=a.split("#### 初步诊断：")[1])==null?void 0:p.split("### 治疗建议：")[0])||"",treatment:a.split("### 治疗建议：")[1]||""}}),C=I(()=>{if(!l.value)return"";let a=l.value.replace(/\*\*/g,"");return a=a.split(`
`).map(t=>t.startsWith("1.")||t.startsWith("2.")||t.startsWith("3.")?`
${t}`:t.startsWith(" - ")?`  ${t}`:t).join(`
`),a});S(()=>{const a=localStorage.getItem("diagnosisMessage");if(a){l.value=a;const t=a.match(/### 建议就诊科室：\s*([^\n]+)/);t&&t[1]&&(y.value=t[1].trim()),localStorage.removeItem("diagnosisMessage")}else console.error("未获取到诊断结果数据")});const x=()=>{k.push("/guide/patientInfo")},E=()=>{window.location.href="http://localhost/guide/patientInfo/human"};return(a,t)=>{const c=B("svg-icon");return h(),b("div",j,[e("div",H,[K,e("div",L,[l.value?(h(),V(o(T),{key:0,shadow:"always",class:"result-card"},{default:n(()=>[e("div",Q,[e("div",R,[s(c,{name:"hospital",class:"section-icon"}),U]),s(o(N),{class:"custom-divider"}),e("div",q,[s(o(W),{type:"success",size:"large",class:"department-tag"},{default:n(()=>[u(i(y.value),1)]),_:1}),F])]),s(o(z),{modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=p=>g.value=p),class:"custom-collapse"},{default:n(()=>[s(o(m),{name:"1",title:"患者基本信息"},{default:n(()=>[e("pre",G,i(r.value.patientInfo),1)]),_:1}),s(o(m),{name:"2",title:"主诉症状"},{default:n(()=>[e("pre",J,i(r.value.symptoms),1)]),_:1}),s(o(m),{name:"3",title:"初步诊断"},{default:n(()=>[e("pre",O,i(r.value.diagnosis),1)]),_:1}),s(o(m),{name:"4",title:"治疗建议"},{default:n(()=>[e("pre",P,i(r.value.treatment),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})):(h(),b("div",X,[s(o(A),{description:"未获取到诊断结果",image:"/images/empty-result.png"},{default:n(()=>[s(o(f),{type:"primary",onClick:x},{default:n(()=>[u("返回首页")]),_:1})]),_:1})]))]),e("div",Y,[s(o(f),{type:"primary",size:"large",onClick:x,class:"action-btn"},{default:n(()=>[s(c,{name:"home",class:"btn-icon"}),u(" 返回首页 ")]),_:1}),s(o(f),{type:"success",size:"large",onClick:E,class:"action-btn"},{default:n(()=>[s(c,{name:"add",class:"btn-icon"}),u(" 继续添加症状 ")]),_:1})])])])}}},et=M(Z,[["__scopeId","data-v-f955d39c"]]);export{et as default};
